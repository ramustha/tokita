import{k as C,D as I,b as n,Y as T,A as j,E as B,Z as D,G as c,o as N,c as U,g as r,u as o,d as f,h as g,j as h,t as k,w as q}from "./index-bc5cd541.js";import{u as M}from "./useToast-28d879a9-da01cbea.js";import{s as R}from "./auth-api-285e1c7c.js";import"./axios-28bc18a3.js";const A=["onSubmit"],G={class:"auth-layout__options flex items-center justify-between"},L={class:"flex justify-center mt-4"},H=C({__name:"Signin",setup(P){const{t}=I(),u=n(""),i=n(""),p=n(!1),m=n([]),d=n([]),v=T(),{init:w}=M(),V=j(()=>!m.value.length&&!d.value.length);let _=!1;B(()=>{const a=localStorage.getItem("token");D(a)||v.push({name:"dashboard"})});async function b(){var s;if(m.value=u.value?[]:["Email is required"],d.value=i.value?[]:["Password is required"],!V.value)return;_=!0;const a=await R({email:u.value,password:i.value});let e=(s=a==null?void 0:a.data)==null?void 0:s.token;a.status==200&&e?(localStorage.setItem("token",e),await v.push({name:"dashboard"})):x(a.error,"danger")}function x(a, e){w({message:a,position:"bottom-right",duration:1e3,color:e})}return(a, e)=>{const s=c("va-input"),y=c("va-checkbox"),E=c("router-link"),S=c("va-button");return N(),U("form",{onSubmit:q(b,["prevent"])},[r(s,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]= l=>u.value=l),class:"mb-4",type:"email",label:o(t)("auth.email"),error:!!m.value.length,"error-messages":m.value},null,8,["modelValue","label","error","error-messages"]),r(s,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]= l=>i.value=l),class:"mb-4",type:"password",label:o(t)("auth.password"),error:!!d.value.length,"error-messages":d.value},null,8,["modelValue","label","error","error-messages"]),f("div",G,[r(y,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]= l=>p.value=l),class:"mb-0",label:o(t)("auth.keep_logged_in")},null,8,["modelValue","label"]),r(E,{class:"ml-1 va-link",to:{name:"recover-password"}},{default:g(()=>[h(k(o(t)("auth.recover_password")),1)]),_:1})]),f("div",L,[r(S,{class:"my-0",disabled:o(_),onClick:b},{default:g(()=>[h(k(o(t)("auth.login")),1)]),_:1},8,["disabled"])])],40,A)}}});export{H as default};
